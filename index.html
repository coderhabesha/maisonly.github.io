<!doctype html>
<html lang="en">
  <head>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Favicon links -->
    <meta name="apple-mobile-web-app-title" content="Maisonly">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Maisonly ‚Äî Private Chef Dinners</title>
    <meta name="description" content="Restaurant-quality private dinners in your home prepared by vetted culinary students with mentor oversight."/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/styles.css">
  </head>
  <body>
    <nav id="nav">
      <div class="wrap">
        <a href="/" class="logo">Maisonly</a>
        <button id="navToggle" class="nav-toggle" aria-expanded="false" aria-controls="navMenu" aria-label="Toggle navigation menu">‚ò∞</button>
        <div class="nav-links" id="navMenu">
          <a href="/about.html">About</a>
          <a href="/faq.html">FAQ</a>
          <a href="#waitlist" class="btn" style="font-size:0.9rem">Join waitlist</a>
        </div>
      </div>
    </nav>

    <main>
      <section class="hero wrap">
        <div class="hero-content">
          <div class="badge">
            <span>Join our launch waitlist</span>
          </div>
          
          <h1>Restaurant-quality dinners, in the comfort of your home</h1>
          
          <p class="hero-subtitle">Experience exceptional private dining with vetted culinary students guided by expert mentors. Intimate, customizable menus for 2‚Äì6 guests with transparent pricing.</p>
          
          <div class="btn-group">
            <a href="#waitlist" class="btn">Join early access</a>
            <a href="/about.html" class="btn btn-secondary">Learn more</a>
          </div>
          
          <div class="trust-badges">
            <div class="trust-item">Vetted chefs</div>
            <div class="trust-item">Food-safety certified</div>
            <div class="trust-item">Mentor oversight</div>
          </div>
        </div>
        
        <div class="hero-visual">
          <img class="hero-image" src="https://images.unsplash.com/photo-1543353071-873f17a7a088?auto=format&fit=crop&w=1600&q=80" alt="Beautifully plated gourmet dish with fresh garnish on elegant white plate">
        </div>
      </section>

      <section class="stats wrap">
        <div class="stat-card">
          <div class="stat-number">500+</div>
          <div class="stat-label">Waitlist signups</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">2‚Äì6</div>
          <div class="stat-label">Guest capacity</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">100%</div>
          <div class="stat-label">Vetted chefs</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">Q3</div>
          <div class="stat-label">2026 Launch</div>
        </div>
      </section>

      <section class="cta-section" id="waitlist">
        <div class="cta-content wrap">
          <h2>Be first to experience Maisonly</h2>
          <p>Join our waitlist and help shape the future of private dining. Early members get exclusive launch benefits.</p>

          <form id="waitlistForm">
            <label for="name" class="sr-only">Your name</label>
            <input 
              name="name" 
              id="name" 
              type="text" 
              placeholder="Your name" 
              required 
              aria-required="true"
            />
            
            <label for="email" class="sr-only">Email address</label>
            <input 
              name="email" 
              id="email" 
              type="email" 
              placeholder="Email address" 
              required 
              aria-required="true"
            />
            
            <label for="role" class="sr-only">I am a...</label>
            <select 
              name="role" 
              id="role" 
              required 
              aria-required="true"
            >
              <option value="">I am a...</option>
              <option value="guest">Guest</option>
              <option value="student">Chef / Student</option>
            </select>
            
            <button type="submit" class="btn btn-lg" id="submitBtn">Join waitlist</button>
            
            <div id="formNote">Optional: 1-2 minute survey after submitting.</div>
          </form>
          
          <div class="cta-note">
            <span>üéÅ</span>
            <span>Early waitlist members receive priority booking and exclusive launch discounts</span>
          </div>
        </div>
      </section>
    </main>
    
    <footer>
      <div class="wrap">
        <div class="footer-content">
          <div>
            <div class="footer-brand">Maisonly</div>
            <p>Restaurant-quality dining at home</p>
          </div>
          <div class="footer-links">
            <a href="/about.html">About</a>
            <a href="/faq.html">FAQ</a>
          </div>
          <div class="footer-links">
            <a href="#waitlist">Join waitlist</a>
            <a href="mailto:hello@maisonly.io">Contact</a>
          </div>
          <div class="footer-links">
            <a href="#">Privacy</a>
            <a href="#">Terms</a>
          </div>
        </div>
        <div class="footer-bottom">
          ¬© 2025 Maisonly. All rights reserved.
        </div>
      </div>
    </footer>

    <script>
      // Initialize Supabase client
      const { createClient } = window.supabase;
      const supabase = createClient(
        'https://roxtlerjyeftjdfcqtmi.supabase.co',
        'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJveHRsZXJqeWVmdGpkZmNxdG1pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3Nzg4NjIsImV4cCI6MjA3NzM1NDg2Mn0.Dj3qhP3tHPKUBAAadpN2b9dD9iolbPqk3wlsslRpj1o'
      );

      // Mobile navigation toggle
      const toggle = document.getElementById('navToggle');
      const menu = document.getElementById('navMenu');
      
      toggle.addEventListener('click', () => {
        const isOpen = menu.classList.toggle('open');
        toggle.setAttribute('aria-expanded', isOpen);
      });

      // Add scrolled class to nav on scroll
      window.addEventListener('scroll', () => {
        const nav = document.getElementById('nav');
        if (window.scrollY > 50) {
          nav.classList.add('scrolled');
        } else {
          nav.classList.remove('scrolled');
        }
      });

      // Intersection Observer for fade-in animations
      const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.opacity = '1';
            entry.target.style.transform = 'translateY(0)';
          }
        });
      }, observerOptions);

      document.querySelectorAll('.feature-card, .stat-card').forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(20px)';
        el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(el);
      });

      // Waitlist form submission
      document.getElementById('waitlistForm').addEventListener('submit', async function(e) {
        e.preventDefault();
    
        const nameInput = document.getElementById('name');
        const emailInput = document.getElementById('email');
        const roleSelect = document.getElementById('role');
        const submitBtn = document.getElementById('submitBtn');
        const formNote = document.getElementById('formNote');
    
        const name = nameInput.value.trim();
        const email = emailInput.value.trim();
        const role = roleSelect.value;
    
        // Validation
        if (!name || !email || !role) {
          formNote.textContent = 'Please fill in all fields.';
          formNote.classList.add('error');
          return;
        }

        // Disable button and show loading state
        submitBtn.disabled = true;
        submitBtn.textContent = 'Joining...';
    
        try {
          const { error } = await supabase
            .from('waitlist')
            .insert([{ name, email, role }]);
    
          if (error) {
            throw error;
          }
    
          // Success - redirect to survey
          const guestForm = 'https://forms.gle/faNkDNyr5DWmUFWW6';
          const studentForm = 'https://forms.gle/j2tSD7F1EjgwMei4A';
          const redirectUrl = role === 'student' ? studentForm : guestForm;
          window.location.href = redirectUrl;
          
        } catch (error) {
          console.error('Submission error:', error);
          formNote.textContent = 'Submission failed. Please try again or contact us directly at hello@maisonly.io';
          formNote.classList.add('error');
          
          // Re-enable button
          submitBtn.disabled = false;
          submitBtn.textContent = 'Join waitlist';
        }
      });
    </script>
  </body>
</html>